---
output: github_document
editor_options: 
  markdown: 
    wrap: 72
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# tidymodlr

<!-- badges: start -->

[![Lifecycle:
experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![CRAN
status](https://www.r-pkg.org/badges/version/tidymodlr)](https://CRAN.R-project.org/package=tidymodlr)

<!-- badges: end -->

The goal of tidymodlr is to ...

## Installation

You can install the development version of tidymodlr from
[GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("david-hammond/tidymodlr")
```

## Example

This is a basic example which shows you how to solve a common problem
with long data:

```{r example}
library(tidymodlr)
data(wb)
head(wb)
```

Here you can see that the format is not conducive to regression or other
types of analysis that require wide formats. The indicator names are
also long, making pivot_longer result in cumbersome column names. To
assist, we build a tidymodl:

```{r}
mdl <- tidymodl$new(wb,
                   pivot_column = "indicator",
                  pivot_value = "value")
print(mdl)

```

This can now be used for regressions

```{r}
### Use mdl$child for modelling
fit <- lm(data = mdl$child, gni ~ gcu + ppt)
summary(fit)
```

We can calculate and visualise correlations:

```{r}
#In built xgboost imputation function
mdl$correlate()
```

We can also impute using xgbBoost:

```{r}
#In built xgboost imputation function
tmp <- mdl$xgb_impute()
head(tmp)
```

We can also perform principal component analysis:

```{r}
# In built principal components analysis function
tmp <- mdl$pca()
plot(tmp, choix = "var")
```

We can also append any data to the original data frame so long as the
`newdata` is either:

-   A vector where `length(newdata) = nrow(mdl$child)`
-   A marix/dataframe where `identical(dim(newdata), dim(mdl$child)) == TRUE`

```{r}

### Can be used to add a yhat value for processed data

nc <- ncol(mdl$child)
nr <- nrow(mdl$child)
dm <- nc * nr
dummy <- matrix(runif(dm),
                ncol = nc) |>
                data.frame()
names(dummy) = names(mdl$child)
tmp <- mdl$assemble(dummy)
head(tmp)
### This is useful for imputation purposes as below
```
